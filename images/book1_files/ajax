_AT.applyWhenReady([{"action":"customCode","selector":"BODY > *:eq(0)","content":"<style>\n/***** BB class for changing label color on click *******/\n.bbiTextPDP label.bbFloat.clickedLabel {\n   color: black !important;\n}\n/*********************/\n\n/**** GENERAL LAYOUT FIXES *****/\n\n  .bbiTextPDP .pure-modal:not(.bbi-pure-modal) #quickView > section.marketplace-tab > div {\n    width: 740px !important;\n}\n\n/* Fixes spacing issue */\n.bbiTextPDP #prodSummary {\n    padding-right: 0px;\n    width: 740px !important;\n    overflow: visible !important;\n}\n.bbiTextPDP .grdnt-fade-white {\n   width: 740px;\n}\n\n/* Hides extra border lines */\n.bbiTextPDP #prodSummary > div:nth-child(11), .bbiTextPDP #prodSummary > div:nth-child(10) {\n    display: none;\n}\n/*******************/\n\n.bbiTextPDP .contributors a, .bbiTextPDP #ratingsDisplay a {\n    color: #346250 !important;\n}\n\n/***** MAIN BOOK TITLE *****/\n.bbiTextPDP #prodSummary h1 {\n    font-family: PoynterOSDisp Semibold !important;\n    font-weight: 100;\n    font-size: 30px;\n    line-height: 1.1;\n}\n/**************************/\n\n\n/******* LABELS ******/\n/* Label spacing/borders */\n.bbiTextPDP label.bbFloat {\n    color: #346250 !important;\n    font-size: 16px;\n    padding: 10px;\n}\n\n.bbiTextPDP .bbCondition {\n    font-weight: 300 !important;\n    font-size: 14px !important;\n}\n\n.bbiTextPDP #prodSummary > ul > li:nth-child(1), .bbiTextPDP #prodSummary > ul > li:nth-child(2), .bbiTextPDP #prodSummary > ul > li:nth-child(3), #prodSummary > ul > li:nth-child(4) {\n    padding-top: 5px !important;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #d1d1d0;\n}\n\n.bbiTextPDP #prodSummary > ul > li:nth-child(1) {\n    padding-top: 10px !important;\n}\n\n/* Fixes 'Buy used & new' placement */\n.bbiTextPDP label.bbFloat.new-used {\n    margin-left: 8px !important;\n}\n/*********************/\n\n/******** PRICES ********/\n.bbiTextPDP .price {\n    font-size: 24px !important;\n}\n\n.bbiTextPDP .current-price {\n    font-size: 28px !important;\n}\n\n.bbiTextPDP #prodSummary > ul > li:nth-child(4) > label > span.price.no-display {\n    font-weight: 300;\n}\n\n.bbiTextPDP #prodSummary > ul > li:nth-child(4) > label > span.price.no-display:before, .bbiTextPDP #prodSummary > ul > li:nth-child(4) > label > span.price:before {\n    text-transform: capitalize;\n    font-style: normal;\n}\n\n.bbiTextPDP .actions > ul > li > p.price {\n    font-size: 28px !important;\n}\n/********************/\n\n/*** DISCOUNT AMOUNT TEXT ***/\n.bbiTextPDP .discount-amount, .bbiTextPDP .discount-amount-text {\n    color: #dd2612 !important;\n    font-weight: 300 !important;\n}\n/******************/\n\n\n/*** LEFT SIDEBAR ISBN INFO ***/\n.bbiTextPDP .textbook-product-details {\n    display: block;\n}\n\n.bbiTextPDP .textbook-product-details div {\n    margin-bottom: 10px;\n}\n\n.bbiTextPDP .textbook-product-details p {\n    float: left;\n    margin-bottom:-2px;\n    font-size: 14px;\n}\n\n  /* for IE issue */\n  .bbiTextPDP .textbook-product-details {\n    float: none !important;\n    width: 100% !important;\n}\n/*******************/\n\n/*** RADIO BUTTONS ***/\n.bbiTextPDP label>input[type=radio]:checked~span.styled-radio {\n    box-shadow: 0 0 0 -1.5px #346250  !important;\n    background-color: #fff;\n    border: 5px solid #346250;\n}\n\n/************/\n\n/*** REMOVING EXTRA BORDER LINES ***/\n.bbiTextPDP .productSeparator {\n    padding: 20px 0 0;\n    border-bottom: 1px solid #ccc;\n    margin: 0 0 20px;\n    width: 100%;\n}\n/*************/\n\n/*** SOCIAL MEDIA BUTTONS ***/\n.bbiTextPDP a.bn-share-link {\n    margin: 6px;\n    padding-top: 5px;\n}\n\n.bbiTextPDP .socialMediaButtons {\n    text-align: left;\n    margin-bottom: 10px !important;\n    display: inline !important;\n}\n  \n.bbiTextPDP .socialMediaButtons a.bn-share-link:first-of-type {\n\tmargin-left: 0 !important;\n}\n/***************/\n\n\n/*** LEFT SIDE TEXT UNDER LABELS - BUY USED, RENT, BUY NEW ***/\n.bbiTextPDP div.bbLeftContent span, .bbiTextPDP div.bbLeftContent .bbCondition {\n    font-weight: 300 !important;\n    margin-top: -8px;\n    /*margin-left: 10px;*/\n    font-size: 15px !important;\n}\n\n .bbiTextPDP div.bbLeftContent span {\n    margin-bottom: -4px !important;\n}\n\n/* The word 'details' under labels */\n.bbiTextPDP .bbCondition a {\n    text-transform: capitalize;\n    color: #346250;\n    font-weight: 500 !important;\n    font-size: 15px !important;\n}\n\n.bbiTextPDP .bbshippingPrice {\n    padding-top: 20px;\n    font-size: 15px !important\n}\n/**********************/\n\n\n/**** RENT SECTION *****/\n\n/* add to bag button positioning */\n#skuSelection > div.textbook-option {\n    width: 30%;\n}\n\n/* Rental period dropdown size */\n.bbiTextPDP #rentalRates-replacement {\n    width: 60%;\n }\n\n.bbiTextPDP p span.bbshippingPrice {\n   margin-left: 0 !important;\n   margin-top: -20px !important;\n   font-size: 15px !important;\n   font-weight: 300 !important;\n}\n\n/* Content in dropdown */\n.bbiTextPDP div.bbLeftContent span.bbrentalPeriod {\n    margin-left: 10px;\n    display: block;\n    margin-bottom: -11px !important;\n    margin-top: 2px !important;\n    color: #6a6a6a;\n    font-size: 16px;\n    font-weight: 300 !important;\n}\n\n.bbiTextPDP div.bbLeftContent span.bbrentalPeriod + span {\n    color: black;\n}\n\n/* Hides unnecessary text */\n.bbiTextPDP .how-textbook-rentals-work {\n    display: none;\n}\n\n/* Rent details info */\n.bbiTextPDP time, .bbiTextPDP time span, .bbiTextPDP .free-return-ship-text {\n    color: #6a6a6a !important;\n    font-size: 15px !important;\n    font-weight: 300 !important;\n}\n\n.bbiTextPDP .free-return-ship-text {\n    font-weight: 300 !important;\n}\n\n/* 'Details' text */\n.bbiTextPDP .bbDetails {\n    color: #346250;\n    font-weight: 500;\n    font-size: 15px;\n}\n\n.bbiTextPDP #prodSummary > ul > li > form > div {\n    top: -40px !important;\n}\n\n.bbiTextPDP #prodSummary > ul > li > form > a {\n    float: right;\n    margin-top: -20px;\n    clear: both;\n}\n\n/* puts price higher up on page */\n.bbiTextPDP .textbook-option {\n    top: -45px !important;\n}\n\n/*******************/\n\n/*** BUY USED & NEW SECTION ****/\n.bbiTextPDP .textbook-item .textbook-info, .bbiTextPDP .textbook-item .textbook-option {\n    margin-left: 0px;\n}\n\n/* Extra spacing under label when dropdown open */\n.bbiTextPDP #prodSummary > ul > li:nth-child(4) > label {\n    padding-bottom: 20px;\n}\n\n/* Section width */\n.bbiTextPDP #quickView .seller {\n    width: 25%;\n}\n\n.bbiTextPDP #quickView .seller-info {\n    width: 38%;\n}\n\n.bbiTextPDP #quickView > section.marketplace-tab > div {\n    width: 740px;\n}\n\n/* Section borders/padding */\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li {\n  padding-bottom: 25px;\n  padding-top: 10px;\n  border-bottom: 1px solid #d1d1d0;\n}\n\n/* \"Seller since\" text */\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > div.seller > p {\n    color: #6a6a6a;\n    font-weight: 300;\n\n}\n\n/* \"Seller since\" year */\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > div.seller > p > data {\n  font-weight: 300 !important;\n}\n\n/* Seller name */\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > div.seller > p > a {\n    font-weight: 500;\n    color: #346250;\n}\n\n\n/* Price */\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > aside > ul > li > p {\n    color: black;\n}\n\n/* condition details */\n.bbiTextPDP .tabgroup .seller-info dt {\n    font-size: 16px !important;\n    font-weight: 500 !important;\n}\n\n.bbiTextPDP .tabgroup .seller-info dt span {\n    color: #346250 !important;\n    font-weight: 300 !important;\n}\n\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li:nth-child(1) > div.seller-info > dl > dd > span {\n    color: #6a6a6a;\n}\n\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > div.seller-info > dl > dd {\n    margin-top: -5px;\n    color: #6a6a6a !important;\n}\n\n/* \"Read More\" text */\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > div.seller-info > dl > dd > a {\n    background: none;\n    width: 100% !important;\n    text-transform: capitalize;\n    color: #346250;\n}\n\n/* feedback rating text */\n.bbiTextPDP p.feedback-rating em {\n    color: #6a6a6a;\n    font-style: normal;\n    font-weight: 300;\n}\n\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > div.seller-info > dl > dd.ship-message {\n    color: #6a6a6a;\n}\n\n/* Info under 'Condition\" */\n.bbiTextPDP #quickView > section.marketplace-tab > div > section > ul > li > div.seller-info > dl > dd > span {\n    font-weight: 300;\n}\n\n.bbiTextPDP div.seller-info strong {\n    font-weight: 300;\n}\n\n/* Shipping Options Offered */\n.bbiTextPDP dd.ship-message {\n    font-size: 16px !important;\n    font-weight: 300 !important;\n}\n\n/* fixes price alignment issues */\n.bbiTextPDP .bbi-pure-modal .section-items .price {\n    width: 170px !important;\n}\n\n/* info icons */\n.bbiTextPDP .bbIcon.icon-info {\n    color: #346250;\n    margin-left: 5px;\n}\n\n/* star spacing */\n .bbiTextPDP .bbi-pure-modal .gigyaRating {\n    top: 1px !important;\n}\n\n.bbiTextPDP .bbi-pure-modal .gig-rating-stars {\n    top: 1px !important;\n}\n\n/* hover state for info icons */\n.bbiTextPDP .icon-info.bbIcon:hover:before {\n    content: \"\\e92c\";\n    cursor: pointer;\n}\n\n/* fixes spacing for seller info */\n.bbiTextPDP .mp-section-items .seller > p {\n    margin-top: -10px !important;\n}\n\n.bbiTextPDP .mp-section-items a[data-prop=sellerName] {\n    position: relative;\n    top: 10px;\n}\n\n/* Add to bag buttons */\n.bbiTextPDP .bbi-pure-modal button.btn-addtocart {\n    width: 100% !important;\n}\n\n/* BUTTON AT VERY BOTTOM */\n.bbiTextPDP .btn.open-marketplace {\n    color: #3e6db5;\n    border: 1px solid #3e6db5;\n    background-color: white !important;\n}\n\n.bbiTextPDP .btn.open-marketplace:hover {\n    background-color: white !important;\n    color: #3e6db5 !important;\n    border: 1px solid #3e6db5;\n}\n\n.bbiTextPDP .btn.open-marketplace:active {\n    background-color: white !important;\n    color: #3e6db5 !important;\n    border: 1px solid #3e6db5;\n}\n\n.bbiTextPDP .btn.open-marketplace:visited {\n    background-color: white !important;\n    color: #3e6db5 !important;\n    border: 1px solid #3e6db5;\n}\n\n\n/***********************/\n\n/* Other fixes */\n.bbiTextPDP #productDetail .productSeparator {\n   display: none;\n}\n\n.bbiTextPDP #prodSummary > ul > li.grdnt-fade-white > form > a {\n   display: none;\n}\n  /* Info buttons */\n  .bbiTextPDP #quickView span[data-icon=plus-expand] {\n    background-image: none;\n    width: 25px;\n    height: 25px;\n    display: inline-block !important;\n    text-decoration: none;\n    text-align: center;\n    padding-top: 1px;\n    text-indent: 0px;\n}\n\n.bbiTextPDP #quickView span[data-icon=plus-expand]::after {\n    width: 100%;\n    height: 100%;\n    display: block;\n    color: #346250;\n    font-size: 20px !important;\n    font-family: bn-icons !important;\n    content: \"\\e92b\";\n    speak: none;\n    font-style: normal;\n    font-weight: 400;\n    font-variant: normal;\n    text-transform: none;\n    line-height: 1;\n    -webkit-font-smoothing: antialiased;\n    text-decoration: none;\n    cursor: pointer;\n}\n\n.bbiTextPDP #quickView span[data-icon=plus-expand]:hover::after {\n    content: \"\\e92c\" !important;\n}\n\n.bbiTextPDP #quickView .seller-info .expand-tooltip-container {\n\tleft: 10px;\n}\n  \n  .bbiTextPDP #productInfoOverview > p > a {\n    background: none;\n    width: 180px !important;\n}\n\n.bbiTextPDP #TOC > p > a {\n    background: none;\n    width: 180px !important;\n}\n  \n  .bbiTextPDP .icon-wishlist-add {\n    padding-left: 2px !important;\n}\n  \n  .bbiTextPDP .new-used span.price:before {\n    content: \"from\";\n    font-style: normal !important;\n    font-size: 16px;\n    text-transform: capitalize !important;\n    font-weight: 300 !important;\n}\n  \n.bbiTextPDP .bbAvailFormats > a.formatModal  {\n\tdisplay: block !important;\n}\n  \n.bbiTextPDP #qvFormatsTabContent .pdpAddToWishlistLink {\n\tdisplay: none;\n}\n\n.bbiTextPDP .pdpAddToWishlistLink {\n    text-decoration: none !important;\n}\n\n.bbiTextPDP .pdpAddToWishlistLink .icon-wishlist-add {\n    font-size: 24px;\n    top: 5px;\n    position: relative;\n    margin-right: 8px;\n}\n\n.bbiTextPDP .pdpAddToWishlistLink:hover .icon-wishlist-add::before {\n    content: \"\\e91b\";\n}\n  \n.bbiTextPDP #prodImage .alt-views {\n    margin-top: 0;\n}\n\n#bbModalShippingContent {\n    width: 580px;\n    position: fixed;\n    z-index: 201;\n    background: white;\n    top: 15%;\n    left: calc(50% - 260px)\n}\n  \n#bbModalShippingContent li, #bbModalShippingContent p {\n    font: 400 14px/1.618 GillSans,Arial,sans-serif;\n}\n\nbody.bbiTextPDP #quickView .mp-section-items li:first-child .expand-tooltip-container {\n    bottom: 46px !important;\n}\n\nbody.bbiTextPDP #quickView .mp-section-items li:first-child .expand-tooltip-container .triangle-up {\n    bottom: -10px !important;\n    transform: rotateZ(180deg) !important;\n    margin-left: 3px;\n}\n</style>\n<script>\nwindow.bbi = window.bbi || {\n    // TODO: Manually put in if not target\n    campaign: \"BBI - 018 - Desktop - Textbook PDP Test 1 - Additional 2 [100 PUSH to A][LIVEv2]\",\n    offerName: \"A\",\n    eVar: \"eVar00\",\n    //site catalyst click tracking function\n    sCall: function(name) {\n        s.tl(true, 'o', name, null, null);\n    },\n    // returns object of all query params\n    //Example if URL = www.google.com?test=a object will be {'test':'a'}\n    queryParams: (function() {\n        var search = window.location.search.substring(1).split('&'),\n            tempSearch, searchObj = {};\n        for (var i = 0; i < search.length; i++) {\n            tempSearch = search[i].split('=');\n            searchObj[tempSearch[0]] = tempSearch[1];\n        }\n        return searchObj;\n    })(),\n    // If query params include the letters bbi show console.log statements\n    verbose: window.location.search.indexOf('bbi') !== -1,\n    debug: function(msg, color) {\n        if (window.console && msg && bbi.verbose === true) {\n            var isMSIE = /*@cc_on!@*/ false;\n            if (isMSIE) {\n                console.log(msg);\n            } else {\n                console.log(\"%c\" + msg, \"color:\" + color + \";font-weight:normal;\");\n            }\n        }\n    },\n    cookie: {\n        set: function(cookieName, cookieValue, expireDays) {\n            expireDays = expireDays || 30;\n            var vDate = new Date();\n            vDate.setTime(vDate.getTime() + (expireDays * 24 * 60 * 60 * 1000));\n            var vExpires = 'expires=' + vDate.toUTCString();\n            document.cookie = cookieName + '=' + cookieValue + '; ' + vExpires + \";domain=\" + document.domain + \";path=/\";\n        },\n        get: function(cookieName) {\n            var vName = cookieName + '=';\n            var vCookies = document.cookie.split(';');\n            for (var i = 0; i < vCookies.length; i++) {\n                var vCookie = vCookies[i];\n                while (vCookie.charAt(0) == ' ') vCookie = vCookie.substring(1);\n                if (vCookie.indexOf(vName) === 0) return vCookie.substring(vName.length, vCookie.length);\n            }\n            return \"\";\n        },\n        delete: function(cookieName) {\n            document.cookie = cookieName + \"= ; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/\";\n        }\n    },\n    runPoll: function(selector, pollFunction, duration, count, failureCallback) {\n        var pollLimit = 500;\n        var pollDuration = duration || 50;\n        var curCount = count || 0;\n        var pollCondition;\n        failureCallback = failureCallback || function() {\n            bbi.debug('Poll' + selector + ' Timed out');\n        };\n        if (typeof jQuery !== 'undefined') {\n            if (typeof(selector) === 'function') {\n                pollCondition = selector();\n            } else {\n                pollCondition = jQuery(selector).length > 0;\n            }\n        } else {\n            pollCondition = false;\n        }\n\n        if (pollCondition) {\n            pollFunction();\n            return true;\n        } else {\n            if (curCount > pollLimit) {\n                //console.log('poll timed out ' + typeof(failureCallback));\n                if (typeof failureCallback === 'function') {\n                    failureCallback();\n                }\n                return false;\n            } else {\n                curCount++;\n                setTimeout(function() {\n                    bbi.runPoll(selector, pollFunction, pollDuration, curCount, failureCallback);\n                }, pollDuration);\n            }\n        }\n    },\n    setEvar: function(_e) {\n        if (!bbi.eVar)\n            throw new Error('bbi.eVar is not defined');\n\n        s.linkTrackVars = bbi.eVar;\n        var eVar_str = _e || bbi.campaign + ' - ' + bbi.offerName;\n\n        if (!bbi.cookie.get('bbi_' + bbi.eVar)) {\n            if (!bbi.offerName)\n                throw new Error('bbi.offerName is not defined');\n            if (!bbi.campaign)\n                throw new Error('bbi.campaign is not defined');\n\n            bbi.cookie.set('bbi_' + bbi.eVar, eVar_str);\n            eVar_str = bbi.cookie.get('bbi_' + bbi.eVar);\n        } else {\n            if (bbi.cookie.get('bbi_' + bbi.eVar).indexOf(eVar_str) === -1) {\n                eVar_str += \"|\" + bbi.cookie.get('bbi_' + bbi.eVar);\n                bbi.cookie.set('bbi_' + bbi.eVar, eVar_str);\n            } else {\n                eVar_str = bbi.cookie.get('bbi_' + bbi.eVar);\n            }\n        }\n        s[bbi.eVar] = eVar_str;\n        // fire custom event to set eVar\n        s.tl(this, 'o', eVar_str, null, null);\n    }\n};\n\nfunction queryParams() {\n    var search = window.location.search.substring(1).split('&'),\n        tempSearch, searchObj = {};\n    for (var i = 0; i < search.length; i++) {\n        tempSearch = search[i].split('=');\n        searchObj[tempSearch[0]] = tempSearch[1];\n    }\n    return searchObj;\n};\n\nbbi.pollCondition = function() {\n    return $(\".bbiTextPDP\").length > 0 && $(\"#prodSummary h1\").length > 0 && $(\"#pdpMainImage\").length > 0 && $(\"span.contributors\").length > 0 && $(\".textbook-product-details\").length > 0 && $(\".pdp-form\").length > 0;\n};\n\nbbi.offer = function() {\n\n    $(\"label\").click(function() {\n        $(\"label\").removeClass(\"clickedLabel\");\n        $(this).addClass(\"clickedLabel\");\n    });\n\n    //social media buttons\n    $(\".textbook-product-details\").append('<div class=\"socialMediaButtons\"><a class=\"bn-share-link\" data-socialsharetype=\"facebook\" href=\"#\" data-share-btn=\"facebook\" title=\"Facebook\"></a><a class=\"bn-share-link\" data-socialsharetype=\"twitter\" href=\"#\" data-share-btn=\"twitter\" title=\"Twitter\"></a><a class=\"bn-share-link\" data-socialsharetype=\"pinterest\" href=\"#\" data-share-btn=\"pinterest\" title=\"Pinterest\"></a><a class=\"bn-share-link\" data-socialsharetype=\"googleplus\" href=\"#\" data-share-btn=\"gplus\" title=\"Google+\"></a></div>');\n\n    // hide instant purchase buttons\n    $(\"form.ip-form\").hide()\n\n    if ($(\"#rentalRates\")) {\n      bbi.runPoll(function() { return $(\"#rentalRates-button-label\").length > 0 && $(\".bbCondition\").length > 0 && $(\".bbLeftContent\").length > 0 && $(\".return-notice\").length > 0 && $(\".how-textbook-rentals-work\").length > 0}, function() {\n\n    $(\"<span class='bbrentalPeriod'>Rental Period</span>\").insertBefore(\"#rentalRates-button-label\");\n\n    $(\".bbLeftContent span:contains('$'):contains('Shipping')\").addClass(\"bbshippingPrice\");\n    $(\".bbshippingPrice\").insertBefore(\"time\");\n      })\n      \n  }\n\n    var currFreeText = $(\".free-return-ship-text\").text();\n    var newFreeText = currFreeText.replace(/Free/, \"FREE\").replace(/details/, \"\").replace(/period /, \"period.\");\n    $(\".free-return-ship-text\").html(newFreeText + \" <a href='#' class='bbDetails'>Details</a>\");\n\n    jQuery('.free-return-ship-text .bbDetails').click(function() {\n        jQuery('<div/>', {'id':'bbModalShippingContent'}).prependTo('body').load('http://www.barnesandnoble.com/modals/search/rentals-faq.jsp .modal-3');\n        jQuery('<div/>', {'class':'bbModalOverlay'}).prependTo('body').css({'width':'100%', 'height':'100%', 'position':'absolute', 'background':'#000', 'opacity':'0.5', 'z-index':'200'});\n    });\n\n    jQuery(document).on('click', '#bbModalShippingContent .close-modal', function() {\n        jQuery('#bbModalShippingContent').remove();\n        jQuery('.bbModalOverlay').remove();\n    });\n\n  \n      \n    jQuery(document).on('click', '#rentalRates-option-list li a', function() {\n        var optionID = jQuery(this).attr('rel');\n        var discount = jQuery('#rentalRates [value=\"' + optionID + '\"]').attr('data-rental-discount');\n        jQuery('.price.rental-price .discount-amount-text').text('You save ' + discount + '%');\n    });\n\n\n    bbi.runPoll('.pdp-form', function() {\n        jQuery('<a href=\"#\" data-url=\"/modals/account/add-to-wishlist.jsp?skuId=' + queryParams().ean + '&amp;productId=prd=' + queryParams().ean + '\" class=\"pdpAddToWishlistLink\" rel=\"nofollow\"><span class=\"icon-wishlist-add\"></span> Save to Wishlist</a>').appendTo('.pdp-form');\n    });\n  \n    bbi.runPoll('.availableformat-separator, #ratingsDisplay', function() {\n        jQuery('.availableformat-separator').insertAfter('#ratingsDisplay').addClass('bbAvailFormats');\n    });\n\n};\n\nbbi.runPoll(bbi.pollCondition, bbi.offer);\n\n</script>"}]);_AT.applyWhenReady([{"action":"customCode","selector":"BODY > *:eq(0)","content":"<style id=\"bbStyleSheet225\">\n\n    .bbiTextPDP .multi-product-select > li:first-child{\n        border-top: 1px solid #d1d1d0;\n        padding-top: 15px;\n    }\n\n    .bbiTextPDP .old-price, .bbiTextPDP .format-content{\n        display: none;\n    }\n\n    .bbiTextPDP .discount-amount, .discount-amount-text{\n        color: #000;\n        font-weight: bold;\n\n    }\n\n    .bbiTextPDP .clearance{\n        margin-top: 5px !important;\n    }\n\n    .bbiTextPDP .bbLeftContent ~ .textbook-option{\n        position: relative;\n        top: -25px;\n    }\n\n    .bbiTextPDP .return-notice{\n        margin-bottom: 0px;\n        font-size: 13px;\n        color: #000;\n    }\n\n    .bbiTextPDP .return-notice time{\n        font-weight: 700;\n    }\n\n    .bbiTextPDP .how-textbook-rentals-work{\n        margin-top: 5px;\n    }\n\n    .bbiTextPDP #skuSelection .selectBox-container, #skuSelection #rentalRates{\n        margin-top: 10px;\n        margin-bottom: 0px;\n    }\n\n    .bbiTextPDP .new-used .price{\n        display: inline-block !important;\n        float: right;\n        color: #000;\n        font-size: 20px;\n    }\n\n    .bbiTextPDP dt .tab-select{\n        color: #ca4f16 !important;\n    }\n\n    .bbiTextPDP a.down-arrowhead{\n        display: block;\n        width: 80px !important;\n        background: url(http://css.css-bn.com/static/img/sprites/bg-img-select-arrow-blue-down.png) right 8px no-repeat;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .section-items .price{\n        text-align: right;\n        width: 140px;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .seller p:first-child{\n        margin-top: 0px;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .gig-rating-stars{\n        top: 9px;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .gigyaRating{\n        position: relative;\n        top: -9px;\n    }\n\n    .bbiTextPDP .bbi-pure-modal #quickView .seller-info dt {\n        width: auto !important;\n    }\n\n    .bbiTextPDP #skuSelection .selectBox-dropdown .selectBox-label, #skuSelection #rentalRates {\n        width: auto !important;\n    }\n\n    .bbiTextPDP .multi-product-select li form {\n        display: inline-block;\n        width: 100%;\n    }\n\n    .bbiTextPDP .price.current-price,\n    .bbiTextPDP .clearance {\n        display: block;\n        text-align: right;\n    }\n\n    .bbiTextPDP li.grdnt-fade-white span.price {\n        float: right;\n        color: #000;\n        font-size: 20px;\n    }\n\n    .bbiTextPDP .bbFloat {\n        float: left;\n    }\n\n    .bbiTextPDP .new-used.bbFloat {\n        float: none !important;\n    }\n\n    .bbiTextPDP .grdnt-fade-white .bbFloat {\n        color: #3169a8;\n        float: none !important;\n    }\n\n    .bbiTextPDP .new-used span.price:before {\n        content: \"from\";\n        font-style: italic;\n        font-size: 16px;\n    }\n\n    .bbiTextPDP .textbook-item .textbook-info,\n    .bbiTextPDP .textbook-item .textbook-option {\n        margin-right: 0px !important;\n        float: right;\n        clear: right;\n        width: 27%;\n    }\n\n    .bbiTextPDP .clearance {\n        float: right;\n    }\n\n    .bbiTextPDP #skuSelection > label {\n        float: left;\n    }\n\n    .bbiTextPDP .new-used ~ .textbook-option {\n        float: none;\n        width: auto;\n    }\n\n    .bbiTextPDP .bbi-pure-modal #qvTitleBar,\n    .bbiTextPDP .bbi-pure-modal .note-msg,\n    .bbiTextPDP .bbi-pure-modal .mrkt-prod-name,\n    .bbiTextPDP .bbi-pure-modal h3,\n    .bbiTextPDP .bbi-pure-modal section[data-condition=\"New\"],\n    .bbiTextPDP .bbi-pure-modal section[data-condition=\"Used\"],\n    .bbiTextPDP .bbi-pure-modal #quickView .section-items>li:nth-of-type(1n+11),\n    .bbiTextPDP .bbi-pure-modal #sortContainer,\n    .bbiTextPDP .options.add-to-wishlist,\n    .bbiTextPDP #componentDiv,\n    .bbiTextPDP #availableFormats,\n    .bbiTextPDP #prodInfoContainer,\n    .bbiTextPDP .formatModal,\n    .bbiTextPDP .textbook-info,\n    .bbiTextPDP .new-used ~ .textbook-option .price[itemprop=\"price\"],\n    .bbiTextPDP.bbLoading .pure-modal-scrollable, \n    .bbiTextPDP .multi-product-select {\n        display: none !important;\n    }\n\n    .bbShow.bbiTextPDP  .multi-product-select {\n        display: block !important;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .open-marketplace {\n        display: inline-block;\n        width: 25% !important;\n        margin-left: 33%;\n        margin-right: auto;\n        position: relative;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .tabgroup>.clear {\n        margin-bottom: 0px;\n    }\n\n    .bbiTextPDP .bbi-pure-modal.pure-modal {\n        box-shadow: none;\n    }\n\n    .bbiTextPDP .bbi-pure-modal section[data-condition=\"All\"] {\n        display: block !important;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .marketplace-tab,\n    .bbiTextPDP .bbi-pure-modal .tabgroup,\n    .bbiTextPDP .bbi-pure-modal section[data-condition=\"All\"] {\n        height: auto !important;\n    }\n\n    .bbiTextPDP .bbi-pure-modal .btn-addtocart {\n        width: 80% !important;\n    }\n\n    .bbiTextPDP .bbi-pure-modal #quickView .actions {\n        float: left;\n        margin-left: 30px;\n    }\n\n    .bbiTextPDP .textbook-product-details div {\n        float: left;\n        width: 100%;\n    }\n\n    .bbiTextPDP #nextThumbs,\n    .bbiTextPDP #prevThumbs {\n        top: 145px;\n    }\n\n    .bbiTextPDP #ratingsDisplay,\n    .bbiTextPDP .bbiTextPDP .textbook-item #prodPromo,\n    .bbiTextPDP ul.add-to-wishlist li:first-child,\n    .bbiTextPDP .textbook-product-details {\n        border: none !important;\n    }\n\n    .bbiTextPDP #prodSummary {\n        width: 720px;\n    }\n\n    .bbiTextPDP .multi-product-select li {\n        background: none;\n    }\n    \n    .bbiTextPDP .multi-product-select li:last-child{\n        border-bottom: none !important;\n    }\n    \n    .bbiTextPDP .multi-product-select li{\n        border-bottom: 1px solid #d1d1d0;\n    }\n\n    .bbiTextPDP #prodSummary dl dd,\n    .bbiTextPDP #prodSummary dl dt {\n        float: none !important;\n    }\n\n    .bbiTextPDP .grdnt-fade-white .bbLeftContent {\n        display: none;\n    }\n\n    .bbiTextPDP .bbLeftContent {\n        margin-top: 5px;\n        float: left;\n        clear: left;\n        padding-left: 30px;\n        display: block;\n        overflow: visible !important;\n    }\n\n</style>\n\n\n<script>\n    //Default bbi object\n    //Put Edits in overrides section\n    //helper functions\n\n    window.bbiTextPDP = window.bbiTextPDP || {\n        // TODO: Manually put in if not target\n        campaign: \"BBI - 018 - Desktop - Textbook PDP Test 1 [100 PUSH to A][LIVEv2]\",\n        offerName: \"A\",\n        eVar: \"eVar00\",\n        //site catalyst click tracking function \n        sCall: function(name) {\n            s.tl(true, 'o', name, null, null);\n        },\n        // returns object of all query params\n        //Example if URL = www.google.com?test=a object will be {'test':'a'}\n        queryParams: (function() {\n            var search = window.location.search.substring(1).split('&'),\n                tempSearch, searchObj = {};\n            for (var i = 0; i < search.length; i++) {\n                tempSearch = search[i].split('=');\n                searchObj[tempSearch[0]] = tempSearch[1];\n            }\n            return searchObj;\n        })(),\n        // If query params include the letters bbi show console.log statements\n        verbose: window.location.search.indexOf('bbi') !== -1,\n        debug: function(msg, color) {\n            if (window.console && msg && bbiTextPDP.verbose === true) {\n                var isMSIE = /*@cc_on!@*/ false;\n                if (isMSIE) {\n                    console.log(msg);\n                } else {\n                    console.log(\"%c\" + msg, \"color:\" + color + \";font-weight:normal;\");\n                }\n            }\n        },\n        cookie: {\n            set: function(cookieName, cookieValue, expireDays) {\n                expireDays = expireDays || 30;\n                var vDate = new Date();\n                vDate.setTime(vDate.getTime() + (expireDays * 24 * 60 * 60 * 1000));\n                var vExpires = 'expires=' + vDate.toUTCString();\n                document.cookie = cookieName + '=' + cookieValue + '; ' + vExpires + \";domain=\" + document.domain + \";path=/\";\n            },\n            get: function(cookieName) {\n                var vName = cookieName + '=';\n                var vCookies = document.cookie.split(';');\n                for (var i = 0; i < vCookies.length; i++) {\n                    var vCookie = vCookies[i];\n                    while (vCookie.charAt(0) == ' ') vCookie = vCookie.substring(1);\n                    if (vCookie.indexOf(vName) === 0) return vCookie.substring(vName.length, vCookie.length);\n                }\n                return \"\";\n            },\n            delete: function(cookieName) {\n                document.cookie = cookieName + \"= ; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/\";\n            }\n        },\n        runPoll: function(selector, pollFunction, pollTime, duration, count, failureCallback) {\n            var pollLimit = pollTime || 500;\n            var pollDuration = duration || 50;\n            var curCount = count || 0;\n            var pollCondition;\n            failureCallback = failureCallback || function() {\n                bbiTextPDP.debug('Poll' + selector + ' Timed out');\n            };\n            if (typeof jQuery !== 'undefined') {\n                if (typeof(selector) === 'function') {\n                    pollCondition = selector();\n                } else {\n                    pollCondition = jQuery(selector).length > 0;\n                }\n            } else {\n                pollCondition = false;\n            }\n\n            if (pollCondition) {\n                pollFunction();\n                return true;\n            } else {\n                if (curCount > pollLimit) {\n                    //console.log('poll timed out ' + typeof(failureCallback));\n                    if (typeof failureCallback === 'function') {\n                        failureCallback();\n                    }\n                    return false;\n                } else {\n                    curCount++;\n                    setTimeout(function() {\n                        bbiTextPDP.runPoll(selector, pollFunction, pollLimit, pollDuration, curCount, failureCallback);\n                    }, pollDuration);\n                }\n            }\n        },\n        setEvar: function(_e) {\n            if (!bbiTextPDP.eVar)\n                throw new Error('bbiTextPDP.eVar is not defined');\n\n            s.linkTrackVars = bbiTextPDP.eVar;\n            var eVar_str = _e || bbiTextPDP.campaign + ' - ' + bbiTextPDP.offerName;\n\n            if (!bbiTextPDP.cookie.get('bbi_' + bbiTextPDP.eVar)) {\n                if (!bbiTextPDP.offerName)\n                    throw new Error('bbiTextPDP.offerName is not defined');\n                if (!bbiTextPDP.campaign)\n                    throw new Error('bbiTextPDP.campaign is not defined');\n\n                bbiTextPDP.cookie.set('bbi_' + bbiTextPDP.eVar, eVar_str);\n                eVar_str = bbiTextPDP.cookie.get('bbi_' + bbiTextPDP.eVar);\n            } else {\n                if (bbiTextPDP.cookie.get('bbi_' + bbiTextPDP.eVar).indexOf(eVar_str) === -1) {\n                    eVar_str += \"|\" + bbiTextPDP.cookie.get('bbi_' + bbiTextPDP.eVar);\n                    bbiTextPDP.cookie.set('bbi_' + bbiTextPDP.eVar, eVar_str);\n                } else {\n                    eVar_str = bbiTextPDP.cookie.get('bbi_' + bbiTextPDP.eVar);\n                }\n            }\n            s[bbiTextPDP.eVar] = eVar_str;\n            // fire custom event to set eVar\n            s.tl(this, 'o', eVar_str, null, null);\n        }\n    };\n\n    //BBI Object overrides\n    //example: bbiTextPDP.verbose = true;\n\n    //Static content - static html, list of information, strings\n    bbiTextPDP.model = {\n        allConditionsModal: '<div class=\"pure-modal bbiAllConditions\" data-modal-name=\"m-condition\" data-modal-guid=\"5a731ca6-86f3-1dea-c3ea-952eefa20a40\" style=\"position: fixed; text-align: left; display: inline-block;top:15%;left:calc(50% - 260px);z-index:201\"><div class=\"modal-5 mrktplc-condition-modal\" role=\"dialog\" aria-labelledby=\"dialog-title\" aria-describedby=\"\" tabindex=\"-1\"><header><div class=\"modal-title\"><h1 id=\"dialog-title\" tabindex=\"1\" data-set=\"title\">Conditions</h1><a href=\"#\" data-close=\"flow\" class=\"close-modal\" title=\"Close\" role=\"button\" tabindex=\"2\"><span>Close</span></a></div></header><section id=\"modalContainer\" class=\"clearer\"><p><b>New</b> - never opened or used in original packaging.</p><p><b>Like New</b> - packaging may have been opened. A \"Like New\" item is suitable to give as a gift.</p><p><b>Very Good</b> - may have minor signs of wear on packaging but item works perfectly and has no damage.</p><p><b>Good</b> - item is in good condition but packaging may have signs of shelf wear/aging or torn packaging. All specific defects should be noted in the Comments section associated with each item.</p><p><b>Acceptable</b> - item is in working order but may show signs of wear such as scratches or torn packaging. All specific defects should be noted in the Comments section associated with each item.</p><p><b>Used</b> - An item that has been opened and may show signs of wear. All specific defects should be noted in the Comments section associated with each item.</p><p><b>Refurbished</b> - A used item that has been renewed or updated and verified to be in proper working condition. Not necessarily completed by the original manufacturer.</p></section></div></div>',\n        usedConditionModal: '<div class=\"pure-modal bbiUsedCondition\" data-modal-name=\"m-usedgood-condition\" data-modal-guid=\"0f90732d-6404-cadf-d545-e5f63c84cfba\" style=\"position: fixed; text-align: left; display: inline-block;top:15%;left: calc(50% - 260px);z-index:201;\"><div class=\"modal-5 usedgood-condition-modal\" role=\"dialog\" aria-labelledby=\"dialog-title\" aria-describedby=\"\" tabindex=\"-1\"><header><div class=\"modal-title\"><h1 id=\"dialog-title\" tabindex=\"1\" data-set=\"title\">Condition: Used \u2014 Good</h1><a href=\"#\" data-close=\"flow\" class=\"close-modal\" title=\"Close\" role=\"button\" tabindex=\"2\"><span>Close</span></a></div></header><section id=\"modalContainer\" class=\"clearer\"><p>Item is in good condition but packaging may have signs of shelf wear/aging or torn packaging.</p></section></div></div>'\n    };\n\n    bbiTextPDP.conditionLabels = function(labelText, shipText, modal, elementclass) {\n        var anchor = jQuery(this).closest('li').find('.bbLeftContent');\n        jQuery(this).closest('li').find('.btn-addtocart').addClass(elementclass);\n\n        if (elementclass != \"bbRent\") {\n            var container = jQuery('<p/>', {\n                'text': 'Condition: ' + labelText,\n                'style': 'margin-top:3px;margin-bottom:0px;font-size: 12px;font-weight: 700;color:#6a6a6a;',\n                'class':'bbCondition'\n            });\n            var condition = jQuery('<a/>', {\n            'href': '#',\n            'text': 'Details',\n            'style': 'font-size:12px;font-weight:700;margin-left:5px'\n        }).click(function() {\n            jQuery(modal).appendTo('body');\n                jQuery('<div/>', {'class':'bbModalOverlay'}).prependTo('body').css({'width':'100%', 'height':'100%', 'position':'absolute', 'background':'#000', 'opacity':'0.5', 'z-index':'200'});\n            jQuery('.bbiAllConditions .close-modal, .bbiUsedCondition .close-modal').on('click', function() {\n                jQuery(this).closest('.pure-modal').remove();\n                jQuery('.bbModalOverlay').remove();\n            });\n        });\n        } else {\n            var container = jQuery('<p/>', {\n                'style': 'margin-top:3px;margin-bottom:0px;font-size: 12px;font-weight: 700;color:#6a6a6a;',\n                'class':'bbCondition'\n            });\n        }\n\n        var shipping = jQuery('<span/>', {\n            'text': shipText,\n            'style': 'display:block;margin-bottom:3px;font-size: 12px;font-weight: 700;color:#6a6a6a;'\n        });\n\n        container.append(condition).prependTo(anchor);\n        shipping.prependTo(anchor);\n    };\n\n    bbiTextPDP.pollCondition = function() {\n        if (jQuery('.textbook-item .open-marketplace').length !== 0) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    bbiTextPDP.pollCondition2 = function() {\n        if (jQuery('.pure-modal section[data-condition=\"All\"]').length !== 0) {\n            return true;\n        } else {\n            return false;\n        }\n    };\n\n    bbiTextPDP.metricsPoll = function(){\n        if(typeof window.s === 'object' && typeof window.s.tl === 'function'){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n\n    bbiTextPDP.metrics = function(){ \n        bbiTextPDP.sCall('viewedTextbook');\n        jQuery('.bbi-pure-modal .btn-addtocart').removeClass('bbUsed').click(function(){bbiTextPDP.sCall('sampleAddMarketplace')});\n        jQuery('.bbUsed').click(function(){bbiTextPDP.sCall('addUsed')});\n        jQuery('.bbNew').click(function(){bbiTextPDP.sCall('addNew')});\n        jQuery('.bbRent').click(function(){bbiTextPDP.sCall('addRental')});\n        jQuery(document).on('click', '.pure-modal:not(.bbi-pure-modal) .btn-addtocart', function(){\n            bbiTextPDP.sCall('addMarketplace')\n        });\n    }\n\n    bbiTextPDP.offer = function() {\n\n        jQuery('body').addClass('bbiTextPDP');\n        jQuery('.multi-product-select li label').each(function(){\n            if(jQuery(this).text().indexOf('Buy Used') !== -1){\n                jQuery(this).closest('li').prependTo('.multi-product-select');\n            }\n        });\n\n\n        setTimeout(function() {\n            jQuery('body').addClass('bbLoading');\n            jQuery('.textbook-item .open-marketplace')[0].click();\n            bbiTextPDP.runPoll(bbiTextPDP.pollCondition2, bbiTextPDP.offer2);\n            \n            if(jQuery('#availableFormats').length === 0){\n                jQuery('.multi-product-select').insertAfter('#alsoAvailableAs');\n            }\n            else{\n                jQuery('.multi-product-select').insertAfter('#availableFormats');\n            }\n            \n            jQuery('.new-used').contents().filter(function() {\n\n                if (this.nodeValue !== null && this.nodeValue.indexOf(\"Marketplace from\") !== -1) {\n                    this.nodeValue = 'Buy Used & New (Marketplace)';\n                }\n            });\n\n\n\n            jQuery('.textbook-product-details').insertAfter('.prim-image');\n          \n            bbiTextPDP.runPoll('#prodImage .alt-views, #prodImage .prim-image', function() {\n                jQuery('#prodImage .alt-views').insertAfter('#prodImage .prim-image');\n            });\n          \n        }, 1500)\n    };\n\n    bbiTextPDP.offer2 = function() {\n\n        var x = jQuery('.pure-modal').clone(true);\n        x.addClass('bbi-pure-modal').appendTo('.new-used ~ .textbook-option');\n\n        x = jQuery('.textbook-item .open-marketplace');\n        x.appendTo('.bbi-pure-modal #quickView .tabgroup');\n\n        jQuery('.bbi-pure-modal h3, .bbi-pure-modal section[data-condition=\"New\"], .bbi-pure-modal section[data-condition=\"Used\"], .bbi-pure-modal #NewSection, .bbi-pure-modal #UsedSection, .bbi-pure-modal #AllSection').remove();\n\n        jQuery('.close-modal')[1].click();\n        jQuery('body').removeClass('bbLoading')\n        jQuery('.bbi-pure-modal .btn-addtocart').text('Add to Bag');\n\n        var text = jQuery('.bbi-pure-modal .open-marketplace').text();\n        text = 'See All ' + text\n        jQuery('.bbi-pure-modal .open-marketplace').text(text);\n\n        jQuery('.textbook-option').each(function() {\n            var self = jQuery(this);\n            if (self.parent().is('li')) {\n                self.parent().find('form .textbook-option').after(self);\n            }\n        });\n\n        var leftContainer = jQuery('<div/>', {\n            'class': 'bbLeftContent'\n        });\n\n        leftContainer.insertBefore('label:not(\".new-used\") + .textbook-option');\n\n        jQuery('#skuSelection .bbLeftContent').prepend(jQuery('#skuSelection .return-notice, .free-return-ship-text, #skuSelection .selectBox-container, #rentalRates, #skuSelection .how-textbook-rentals-work'));\n\n\n        jQuery('.multi-product-select li').each(function() {\n            var self = jQuery(this);\n            var test = self.find('label');\n\n            if (test.text().indexOf('Buy Used') !== -1) {\n                bbiTextPDP.conditionLabels.apply(self, ['Used-Good', 'Eligible for FREE Shipping', bbiTextPDP.model.usedConditionModal, 'bbUsed']);\n            } else if (test.text().indexOf('Buy New') !== -1) {\n                bbiTextPDP.conditionLabels.apply(self, ['New', 'Eligible for FREE Shipping', bbiTextPDP.model.allConditionsModal, 'bbNew']);\n            } else if (test.text().indexOf('Rent') !== -1) {\n                bbiTextPDP.conditionLabels.apply(self, ['New', '$3.99 Shipping', bbiTextPDP.model.allConditionsModal, 'bbRent']);\n            }\n\n            test.addClass('bbFloat');\n        });\n        jQuery('input[name=rental-options]:eq(0)').click();\n\n        jQuery('.discount-amount, .discount-amount-text').each(function(){\n            var self = jQuery(this);\n            var text = self.text().replace('| Save', 'You save');\n            self.text(text);\n        });\n\n        /* jQuery('.how-textbook-rentals-work').contents().filter(function() {\n\n            if (this.nodeValue !== null && this.nodeValue.indexOf(\"Textbook Rentals in 3 Easy Steps\") !== -1) {\n                this.nodeValue = 'FREE return shipping at the end of rental period';\n            }\n        }); */\n\n        jQuery('.bbi-pure-modal .feedback-rating > em').text('Feedback rating: ');\n\n        jQuery('.bbi-pure-modal .section-items .price').each(function(){\n            var self = jQuery(this);\n            var addToBag = self.closest('li').find('.btn-addtocart')\n            self.insertBefore(addToBag);\n        });\n\n        bbiTextPDP.runPoll(bbiTextPDP.metricsPoll, bbiTextPDP.metrics);\n\n        jQuery('body').addClass('bbShow');\n    }\n    bbiTextPDP.runPoll(bbiTextPDP.pollCondition, bbiTextPDP.offer, 50, 50, 0, function() {\n        jQuery('#bbStyleSheet225').remove();\n    });\n\n\n\n</script>"}]);_AT.applyWhenReady([{"action":"customCode","selector":"BODY > *:eq(0)","content":"<style>\n.bbiTextPDP #availableFormats {\n    display: none;\n}\n\n.bbiTextPDP #bbDropdown {\n    margin: 15px 0 0;\n}\n\n.bbiTextPDP #bbDropdown dd,\n.bbiTextPDP #bbDropdown dt,\n.bbiTextPDP #bbDropdown ul {\n    margin: 0px;\n    padding: 0px;\n}\n\n.bbiTextPDP #bbDropdown dd {\n    position: relative;\n}\n\n.bbiTextPDP #bbDropdown a,\n.bbiTextPDP #bbDropdown a:visited {\n    color: #000;\n    text-decoration: none;\n    outline: none;\n}\n\n.bbiTextPDP #bbDropdown a:hover {\n    color: #000;\n}\n\n.bbiTextPDP #bbDropdown dt {\n    display: table;\n    width: auto !important;\n}\n\n.bbiTextPDP #bbDropdown dt,\n.bbiTextPDP #bbDropdown dd {\n    float: none !important;\n}\n\n.bbiTextPDP #bbDropdown dt p:hover {\n    border: 1px solid #c1c0bb;\n}\n\n.bbiTextPDP #bbDropdown dt p {\n    display: block;\n    padding: 5px 10px 5px 10px;\n    border-radius: 4px;\n    min-width: 200px;\n    margin: 0;\n    cursor: pointer;\n    font-size: 16px;\n    background: #f8f7f4;\n    background: -moz-linear-gradient(90deg, #f8f7f4 0, #fff 100%);\n    background: -webkit-linear-gradient(90deg, #f8f7f4 0, #fff 100%);\n    background: -o-linear-gradient(90deg, #f8f7f4 0, #fff 100%);\n    background: -ms-linear-gradient(90deg, #f8f7f4 0, #fff 100%);\n    background: linear-gradient(180deg, #f8f7f4 0, #fff 100%);\n    -pie-background: linear-gradient(90deg, #f8f7f4 0, #fff 100%);\n    border: 1px solid #b4b2ac;\n    box-shadow: inset 0 2px 4px -1px #ccc;\n}\n\n.bbiTextPDP #bbDropdown .bbArrow {\n    position: relative;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 6px 5px 0 5px;\n    border-color: #3169a8 transparent transparent transparent;\n    margin-top: 12px;\n    margin-left: 20px;\n    float: right;\n}\n\n.bbiTextPDP #bbDropdown .bbArrow:before {\n    content: \" \";\n    position: absolute;\n    top: -8px;\n    left: -5px;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 6px 5px 0 5px;\n    border-color: #fff transparent transparent transparent;\n}\n\n.bbiTextPDP #bbDropdown dt p span {\n    display: inline-block;\n}\n\n.bbiTextPDP #bbDropdown dd ul {\n    background: #fff none repeat scroll 0 0;\n    border: 1px solid #c1c0bb;\n    color: #000;\n    display: none;\n    left: 0px;\n    padding: 5px 0px;\n    position: absolute;\n    top: 6px;\n    width: auto;\n    min-width: 185px;\n    list-style: none;\n    border-radius: 2px;\n    z-index: 10;\n}\n\n.bbiTextPDP #bbDropdown dd ul li a {\n    padding: 5px 10px;\n    display: block;\n    min-width: 160px;\n}\n\n.bbiTextPDP #bbDropdown dd ul li a:hover {\n    background-color: #c1c0bb;\n}\n\n.bbiTextPDP #bbDropdown strong {\n    font-size: 13px;\n    font-weight: bold;\n    color: #000;\n    display: inline-block;\n    min-width: auto;\n    margin-right: 5px;\n}\n\n.bbiTextPDP #bbDropdown dd ul li a strong {\n    color: #3169a8;\n    font-weight: normal;\n}\n\n.bbiTextPDP #bbDropdown em {\n    font-size: 13px;\n    text-decoration: none;\n    font-style: normal;\n    font-weight: normal;\n    color: #3169a8;\n    display: inline-block;\n}\n\n.bbiTextPDP #bbDropdown dd ul li a strong,\n.bbiTextPDP #bbDropdown dd ul li a em {\n    font-size: 13px;\n}\n</style>\n<script type=\"text/javascript\">\nwindow.bbi = window.bbi || {};\nbbi.campaign = \"BB - Desktop PDP 1\";\nbbi.recipe = \"Challenger B\";\nbbi.clickTrackDelay = 300;\nbbi.runPoll = (function(selector, pollFunction, duration, limit, failureCallback) {\n    var pollLimit = limit || 300;\n    var pollDuration = duration || 50;\n    var curCount = 0;\n    var pollCondition;\n    if (typeof jQuery !== 'undefined') {\n        if (typeof(selector) === 'function') {\n            pollCondition = selector();\n        } else {\n            pollCondition = jQuery(selector).length > 0;\n        }\n    } else {\n        pollCondition = false;\n    }\n\n    if (pollCondition) {\n        pollFunction();\n        return true;\n    } else {\n        if (curCount > pollLimit) {\n            //console.log('poll timed out ' + typeof(failureCallback) + selector);\n            if (typeof failureCallback === 'function') {\n                failureCallback();\n            }\n            return false;\n        } else {\n            curCount++;\n            setTimeout(function() {\n                bbi.runPoll(selector, pollFunction, pollDuration, curCount, failureCallback);\n            }, pollDuration);\n        }\n    }\n});\nbbi.scTrack = function(targetElement, typeOfEvent, scString) {\n    if (typeOfEvent === \"clickLink\") {\n        targetElement.click(function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            s.tl(true, \"o\", scString, null, null);\n            window.setTimeout(function() {\n                targetElement.unbind('click');\n                if (targetElement[0].click) {\n                    targetElement[0].click();\n                } else if (document.createEvent) {\n                    var evObj = document.createEvent('MouseEvents');\n                    evObj.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n                    targetElement[0].dispatchEvent(evObj);\n                }\n            }, bbi.clickTrackDelay);\n            return false;\n        });\n    } else if (typeOfEvent === \"click\") {\n        jQuery('body').on('mouseup', targetElement, function(e) {\n            //mboxUpdate.apply(mboxUpdate, mboxArgs);\n            s.tl(true, \"o\", scString, null, null);\n        });\n    } else if (typeOfEvent === \"clickLinkDelegate\") {\n        $.fn.simulateClick = function() {\n            var ele = this[0];\n            if (document.dispatchEvent) {\n                var evObj = document.createEvent('MouseEvents');\n                evObj.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n                ele.dispatchEvent(evObj);\n            } else if (this[0].click) {\n                ele.click();\n            }\n            return this;\n        };\n        var clickHandler = function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            //store the element actually clicked on\n            var self = this;\n            s.tl(true, \"o\", scString, null, null);\n\n            window.setTimeout(\n                function() {\n                    //only remove the our clickhandler not any other events attached to it\n                    jQuery('body').off('click', targetElement, clickHandler);\n                    jQuery(self).simulateClick();\n                }, bbi.clickTrackDelay\n            );\n            return false;\n        };\n        jQuery('body').on('click', targetElement, clickHandler);\n    }\n};\n\nbbi.runPoll(function() { return $('.bbiTextPDP #availableFormats').length > 0 && $('.bbiTextPDP #prodImage > div.textbook-product-details').length > 0; }, function() {\n\n    // create custom dropdown structure\n    var dropdown = jQuery('<dl/>', {\n        'id': 'bbDropdown',\n        'class': 'clearer bbSelect'\n    }).insertBefore('#prodImage > div.textbook-product-details');\n\n    var dt = jQuery('<dt/>').appendTo(dropdown);\n\n    // build initial display based on currently selected format\n    var selectedLink = jQuery('<p/>', {\n        'html': '<span><strong class=\"title\">' + jQuery(\"#availableFormats li.tab.selected .tabTitle\").text() + ': ' + '</strong><em class=\"price\">' + jQuery(\"#availableFormats li.tab.selected .tabPriceSelected\").text() + '</em></span>'\n    }).appendTo(dt);\n\n    // finish building structure / dropdown arrow\n    var arrow = jQuery('<span/>', {\n        'class': 'bbArrow'\n    }).appendTo(selectedLink);\n    var dd = jQuery('<dd/>').appendTo(dropdown);\n\n    // create dropdown list\n    var ul = jQuery('<ul/>', {\n        'id': 'bbList'\n    }).appendTo(dd);\n\n    // wait for tabs to be available\n    bbi.runPoll('.bbiTextPDP #availableFormats li.tab', function() {\n\n        if($('#availableFormats li.tab').length > 1) {\n          // loop through available formats\n          jQuery('#availableFormats li.tab').each(function() {\n              // grab format title\n              var thisTitle = jQuery(this).find('.tabTitle').text() + ' - ';\n\n              // grab format price - remember to account for different selector (.tabPriceSelected vs .tabPrice)\n              var thisPrice;\n              if (jQuery(this).find('.tabPrice').length > 0) {\n                  thisPrice = jQuery(this).find('.tabPrice').text();\n              } else if (jQuery(this).find('.tabPriceSelected').length > 0) {\n                  thisPrice = jQuery(this).find('.tabPriceSelected').text();\n              }\n\n              // grab format link\n              var thisLink = jQuery(this).find('a').attr('href');\n\n              // create link with bbDisable class if this format is currently selected\n              if (jQuery(this).hasClass('selected')) {\n                  jQuery('<li><a href=\"' + thisLink + '\" class=\"bbDisable\"><strong>' + thisTitle + '</strong><em>' + thisPrice + '</em></a></li>').appendTo('#bbList');\n              } else {\n                  jQuery('<li><a href=\"' + thisLink + '\"><strong>' + thisTitle + '</strong><em>' + thisPrice + '</em></a></li>').appendTo('#bbList');\n              }\n          });\n\n          // toggle dropdown on click\n          jQuery(\"#bbDropdown p\").click(function() {\n              jQuery(\"#bbDropdown ul\").toggle();\n          });\n\n          // hide dropdown when clicking on another element\n          jQuery(document).bind('click', function(e) {\n              var clickedEl = jQuery(e.target);\n              if (!clickedEl.parents().hasClass(\"bbSelect\"))\n                  jQuery(\"#bbDropdown ul\").hide();\n          });\n\n          jQuery('a.bbDisable').click(function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              jQuery(\"#bbDropdown ul\").hide();\n          });\n        } else {\n          $('#bbDropdown').remove();\n\n          $('<p/>', {\n            html: '<span>Format:</span> ' + $('.tabTitle').text()\n          }).prependTo('#prodImage > div');\n        }\n    });\n\n    // fire mbox metric to segment users who saw multiple format options\n    bbi.runPoll(function() {\n        return typeof s !== 'undefined' && typeof s.tl !== 'undefined';\n    }, function() {\n        s.tl(true,\"o\",\"formatQualified\",null,null);\n    });\n});\n\n\n\n//-------- CLICK TRACKING --------------\nbbi.runPoll(function() {\n    return typeof s !== 'undefined' && typeof s.tl !== 'undefined';\n}, function() {\n    // change format - CHALLENGER B\n    bbi.scTrack('#bbDropdown li a:not(\".bbDisable\")', 'clickLinkDelegate', 'changeFormat');\n    // cart addition on page\n    bbi.scTrack('.btn-addtocart', 'click', 'cartAdditionOnPage');\n\n    // cart addition on page - \"fix\" for marketplace CTAs not being captured\n    bbi.runPoll('.btn.open-marketplace', function() {\n        jQuery('.btn.open-marketplace').click(function() {\n            bbi.runPoll('.mp-section-items .btn-addtocart', function() {\n                window.bbSetCartClickTrack = 'true';\n                if (!window.bbSetCartClickTrack) {\n                    bbi.scTrack('.mp-section-items .btn-addtocart', 'click', 'cartAdditionOnPage');\n                }\n            });\n        });\n    });\n\n    // checkout CTA in dropdown\n    bbi.scTrack('#miniCart .btn-orange.sign-in-checkout', 'clickLinkDelegate', 'checkoutInDropdown');\n    bbi.scTrack('#miniCart #continue', 'clickLinkDelegate', 'checkoutInDropdown');\n\n    // shopping bag in dropdown\n    bbi.scTrack('#miniCart #viewBagLink', 'clickLinkDelegate', 'shoppingBagInDropdown');\n\n    // review clicks\n    bbi.scTrack('#ratingsDisplay a', 'clickLinkDelegate', 'reviewClick');\n\n    // marketplace body\n    bbi.scTrack('.btn.open-marketplace:not(\"#bbi-bag-cta\")', 'click', 'marketplaceBody');\n});\n</script>"}]);_AT.applyWhenReady([{"action":"customCode","selector":"BODY > *:eq(0)","content":"<style class=\"bbiStyleSheet\">.bbNav4 .bbNav4Sale {\n    padding-left: 6px;\n    color: red !important;\n    font-weight: bold !important;\n}\n\n.bbNav4 nav#primaryNav li.main-cat-5:hover div.triangle-up {\n    left: 18%;\n    background-position:\n-254px -91px;\n}\n</style>\n\n<script type=\"text/javascript\">\n    //Default bbi object\n    //Put Edits in overrides section\n    //helper functions\n\n    window.bbi = window.bbi || {\n        // TODO: Manually put in if not target\n        campaign: \"BBI - 030 - DT_TB - Sitewide Sale Nav [100toB] [LIVE]\",\n        offerName: \"B\",\n        eVar: \"eVar00\",\n        //site catalyst click tracking function\n        sCall: function(name) {\n            s.tl(true, 'o', name, null, null);\n        },\n        // returns object of all query params\n        //Example if URL = www.google.com?test=a object will be {'test':'a'}\n        queryParams: (function() {\n            var search = window.location.search.substring(1).split('&'),\n                tempSearch, searchObj = {};\n            for (var i = 0; i < search.length; i++) {\n                tempSearch = search[i].split('=');\n                searchObj[tempSearch[0]] = tempSearch[1];\n            }\n            return searchObj;\n        })(),\n        // If query params include the letters bbi show console.log statements\n        verbose: window.location.search.indexOf('bbi') !== -1,\n        debug: function(msg, color) {\n            if (window.console && msg && bbi.verbose === true) {\n                var isMSIE = /*@cc_on!@*/ false;\n                if (isMSIE) {\n                    console.log(msg);\n                } else {\n                    console.log(\"%c\" + msg, \"color:\" + color + \";font-weight:normal;\");\n                }\n            }\n        },\n        cookie: {\n            set: function(cookieName, cookieValue, expireDays) {\n                expireDays = expireDays || 30;\n                var vDate = new Date();\n                vDate.setTime(vDate.getTime() + (expireDays * 24 * 60 * 60 * 1000));\n                var vExpires = 'expires=' + vDate.toUTCString();\n                document.cookie = cookieName + '=' + cookieValue + '; ' + vExpires + \";domain=\" + document.domain + \";path=/\";\n            },\n            get: function(cookieName) {\n                var vName = cookieName + '=';\n                var vCookies = document.cookie.split(';');\n                for (var i = 0; i < vCookies.length; i++) {\n                    var vCookie = vCookies[i];\n                    while (vCookie.charAt(0) == ' ') vCookie = vCookie.substring(1);\n                    if (vCookie.indexOf(vName) === 0) return vCookie.substring(vName.length, vCookie.length);\n                }\n                return \"\";\n            },\n            delete: function(cookieName) {\n                document.cookie = cookieName + \"= ; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/\";\n            }\n        },\n        runPoll: function(selector, pollFunction, duration, count, failureCallback) {\n            var pollLimit = 100;\n            var pollDuration = duration || 50;\n            var curCount = count || 0;\n            var pollCondition;\n            failureCallback = failureCallback || function() {\n                bbi.debug('Poll' + selector + ' Timed out');\n            };\n            if (typeof jQuery !== 'undefined') {\n                if (typeof(selector) === 'function') {\n                    pollCondition = selector();\n                } else {\n                    pollCondition = jQuery(selector).length > 0;\n                }\n            } else {\n                pollCondition = false;\n            }\n\n            if (pollCondition) {\n                pollFunction();\n                return true;\n            } else {\n                if (curCount > pollLimit) {\n                    //console.log('poll timed out ' + typeof(failureCallback));\n                    if (typeof failureCallback === 'function') {\n                        failureCallback();\n                    }\n                    return false;\n                } else {\n                    curCount++;\n                    setTimeout(function() {\n                        bbi.runPoll(selector, pollFunction, pollDuration, curCount, failureCallback);\n                    }, pollDuration);\n                }\n            }\n        },\n        setEvar: function(_e) {\n            if (!bbi.eVar)\n                throw new Error('bbi.eVar is not defined');\n\n            s.linkTrackVars = bbi.eVar;\n            var eVar_str = _e || bbi.campaign + ' - ' + bbi.offerName;\n\n            if (!bbi.cookie.get('bbi_' + bbi.eVar)) {\n                if (!bbi.offerName)\n                    throw new Error('bbi.offerName is not defined');\n                if (!bbi.campaign)\n                    throw new Error('bbi.campaign is not defined');\n\n                bbi.cookie.set('bbi_' + bbi.eVar, eVar_str);\n                eVar_str = bbi.cookie.get('bbi_' + bbi.eVar);\n            } else {\n                if (bbi.cookie.get('bbi_' + bbi.eVar).indexOf(eVar_str) === -1) {\n                    eVar_str += \"|\" + bbi.cookie.get('bbi_' + bbi.eVar);\n                    bbi.cookie.set('bbi_' + bbi.eVar, eVar_str);\n                } else {\n                    eVar_str = bbi.cookie.get('bbi_' + bbi.eVar);\n                }\n            }\n            s[bbi.eVar] = eVar_str;\n            // fire custom event to set eVar\n            s.tl(this, 'o', eVar_str, null, null);\n        }\n    };\n\n    //sitecatalyst calls on m.toysrus.com and t.toysrus.com\n    bbi.sCallMobile = function(name) {\n        s_tl.tl(true, 'o', name, null, null);\n    }\n\n    //BBI Object overrides\n    //example: bbi.verbose = true;\n\n    //Static content - static html, list of information, strings\n    bbi.model = {\n\n    };\n\n    bbi.pollCondition = function() {\n      return jQuery('#primaryNav > ol[role=\"menubar\"] > li > a:contains(\"Bargain\")').length > 0;\n    };\n\n    bbi.offer = function() {\n      let bbPath = window.location.pathname;\n\n      if(bbPath.indexOf('/checkout/thank-you') > -1) {\n        //run poll for ad\n        bbi.runPoll(function() {\n          return jQuery('#relatedAd div iframe').length > 0;\n        }, function() {\n          bbi.exec();\n        })\n      } else {\n        bbi.exec();\n      }\n    };\n\n    bbi.exec = function() {\n      jQuery('body').addClass('bbNav4');\n      jQuery('.bbNav4 #primaryNav > ol[role=\"menubar\"] > li > a:contains(\"Bargain\")').addClass('bbNav4Sale').text('Sale');\n      jQuery('.bbNav4 .bbNav4Sale').parent().insertAfter('.bbNav4 #primaryNav > ol[role=\"menubar\"] > li:last');\n      jQuery('#topNavHeader5 a:first').html('Sale & More <span class=\"right-arrowhead\"></span>');\n\n      if(window.location.pathname.indexOf('/b/bargain-books/_/') > -1) {\n        bbi.runPoll(function() {\n          return jQuery('#categoryHeaderContainer h1').length > 0 && jQuery('#refinements ul.selected-facets li a[title=\"Bargain Books\"]').length > 0;\n        }, function() {\n          jQuery('#categoryHeaderContainer h1').text('Sale & More');\n          jQuery('#refinements ul.selected-facets li a[title=\"Bargain Books\"]').text('Sale & More');\n        });\n      }\n    }\n\n    bbi.runPoll(bbi.pollCondition, bbi.offer);\n</script>"}]);var mboxCurrent = mboxFactories.get('default').get('target-global-mbox',0);mboxCurrent.setOffer(new mboxOfferAjax('\n\n\n'));mboxCurrent.getOffer().setOnLoad(function() {
/*T&T Metadata v3 ==>Response Plugin*/
window.ttMETA=(typeof(window.ttMETA)!="undefined")?window.ttMETA:[];window.ttMETA.push({"CampaignName":"BBI - 018 - Desktop - Textbook PDP Test 1 - Additional 2 [100 PUSH to A][LIVEv2]","CampaignId":"150441","RecipeName":"A","RecipeId":"1","OfferId":"297481","OfferName":"/bbi_-_018_-_desktop-textbookpdptest1100pushtoa10-12qa-paramcopy/experiences/1/pages/0/0/1476984174038","MboxName":"target-global-mbox"});

/*T&T Metadata v3 ==>Response Plugin*/
window.ttMETA=(typeof(window.ttMETA)!="undefined")?window.ttMETA:[];window.ttMETA.push({"CampaignName":"BBI - 018 - Desktop - Textbook PDP Test 1 [100 PUSH to A][LIVEv2]","CampaignId":"149415","RecipeName":"A","RecipeId":"1","OfferId":"292757","OfferName":"/bbi_-_018_-_desktop-textbookpdptest1100pushtoalivecopy/experiences/1/pages/0/0/1476279503252","MboxName":"target-global-mbox"});

/*T&T Metadata v3 ==>Response Plugin*/
window.ttMETA=(typeof(window.ttMETA)!="undefined")?window.ttMETA:[];window.ttMETA.push({"CampaignName":"BBI - 018 - Desktop - Textbook PDP Test 1 - Additional [100 PUSH to A] [LIVEv2]","CampaignId":"149413","RecipeName":"A","RecipeId":"1","OfferId":"292752","OfferName":"/bbi_-_018_-_desktop-textbookpdptest1-additional100pushtoalivecop/experiences/1/pages/0/0/1476279497200","MboxName":"target-global-mbox"});

/*T&T Metadata v3 ==>Response Plugin*/
window.ttMETA=(typeof(window.ttMETA)!="undefined")?window.ttMETA:[];window.ttMETA.push({"CampaignName":"BBI - 030 - DT_TB - Sitewide Sale Nav [100toB] [LIVE]","CampaignId":"153668","RecipeName":"B","RecipeId":"2","OfferId":"315365","OfferName":"/bbi_-_030_-_dt_tb-sitewidesalenavlivecopy/experiences/2/pages/0/0/1479405115031","MboxName":"target-global-mbox"});
});mboxCurrent.loaded();